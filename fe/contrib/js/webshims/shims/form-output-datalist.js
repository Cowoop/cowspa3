jQuery.webshims.ready("dom-support",function(b,f,o,k,n){f.propTypes.element=function(h){f.createPropDefault(h,"attr");if(!h.prop)h.prop={get:function(){var e=h.attr.get.call(this);e&&(e=b("#"+e)[0])&&h.propNodeName&&!b.nodeName(e,h.propNodeName)&&(e=null);return e||null},writeable:!1}};(function(){if(!("value"in k.createElement("output"))){f.defineNodeNameProperty("output","value",{prop:{set:function(e){var f=b.data(this,"outputShim");f||(f=h(this));f(e)},get:function(){return f.contentAttr(this,
"value")||b(this).text()||""}}});f.onNodeNamesPropertyModify("input","value",function(e,f,i){i!="removeAttr"&&(f=b.data(this,"outputShim"))&&f(e)});var h=function(e){if(!e.getAttribute("aria-live")){var e=b(e),h=(e.text()||"").trim(),i=e.attr("id"),l=e.attr("for"),j=b('<input class="output-shim" type="hidden" name="'+(e.attr("name")||"")+'" value="'+h+'" style="display: none" />').insertAfter(e),a=j[0].form||k,d=function(a){j[0].value=a;a=j[0].value;e.text(a);f.contentAttr(e[0],"value",a)};e[0].defaultValue=
h;f.contentAttr(e[0],"value",h);e.attr({"aria-live":"polite"});i&&(j.attr("id",i),e.attr("aria-labeldby",f.getID(b('label[for="'+i+'"]',a))));l&&(i=f.getID(e),l.split(" ").forEach(function(a){(a=k.getElementById(a))&&a.setAttribute("aria-controls",i)}));e.data("outputShim",d);j.data("outputShim",d);return d}};f.addReady(function(e,f){b("output",e).add(f.filter("output")).each(function(){h(this)})})}})();(function(){if(!Modernizr.datalist){var h=0,e={submit:1,button:1,reset:1,hidden:1,range:1,date:1},
m=b.browser.msie&&parseInt(b.browser.version,10)<7,i={},l=function(a){if(!a)return[];if(i[a])return i[a];var b;f.ready("json-storage",function(){try{b=JSON.parse(localStorage.getItem("storedDatalistOptions"+a))}catch(c){}i[a]=b||[]});return b||[]},j={_create:function(a){if(!e[(a.input.getAttribute("type")||"").toLowerCase()||a.input.type]){var d=a.datalist,c=b.data(a.input,"datalistWidget");if(d&&c&&c.datalist!==d)c.datalist=d,c.id=a.id,c._resetListCached();else if(d){if(!(c&&c.datalist===d)){h++;
var g=this;this.timedHide=function(){clearTimeout(g.hideTimer);g.hideTimer=setTimeout(b.proxy(g,"hideList"),9)};this.datalist=d;this.id=a.id;this.lazyIDindex=h;this.hasViewableData=!0;this._autocomplete=b.attr(a.input,"autocomplete");b.data(a.input,"datalistWidget",this);this.shadowList=b('<div class="datalist-polyfill" />').appendTo("body");this.index=-1;this.input=a.input;this.arrayOptions=[];this.shadowList.delegate("li","mouseover.datalistWidget mousedown.datalistWidget click.datalistWidget",
function(a){var c=b("li:not(.hidden-item)",g.shadowList),d=a.type=="mousedown"||a.type=="click";g.markItem(c.index(a.target),d,c);a.type=="click"&&g.hideList();return a.type!="mousedown"}).bind("focusout",this.timedHide);a.input.setAttribute("autocomplete","off");b(a.input).attr({"aria-haspopup":"true"}).bind("input.datalistWidget",b.proxy(this,"showHideOptions")).bind("keydown.datalistWidget",function(a){var c=a.keyCode;if(c==40&&!g.showList())return g.markItem(g.index+1,!0),!1;if(g.isListVisible){if(c==
38)return g.markItem(g.index-1,!0),!1;if(!a.shiftKey&&(c==33||c==36))return g.markItem(0,!0),!1;if(!a.shiftKey&&(c==34||c==35))return a=b("li:not(.hidden-item)",g.shadowList),g.markItem(a.length-1,!0,a),!1;if(c==13||c==27)return c==13&&(a=b("li.active-item:not(.hidden-item)",g.shadowList),a[0]&&(b.prop(g.input,"value",a.attr("data-value")),b(g.input).triggerHandler("updateInput"))),g.hideList(),!1}}).bind("focus.datalistWidget",function(){b(this).hasClass("list-focus")&&g.showList()}).bind("blur.datalistWidget",
this.timedHide);b(this.datalist).unbind("updateDatalist.datalistWidget").bind("updateDatalist.datalistWidget",b.proxy(this,"_resetListCached"));this._resetListCached();a.input.form&&a.input.id&&b(a.input.form).bind("submit.datalistWidget"+a.input.id,function(){var c=b.prop(a.input,"value");g.storedOptions=l(a.input.name||a.input.id);if(c&&b.inArray(c,g.storedOptions)==-1){g.storedOptions.push(c);var c=a.input.name||a.input.id,d=g.storedOptions;if(c){d=d||[];try{localStorage.setItem("storedDatalistOptions"+
c,JSON.stringify(d))}catch(e){}}}});b(o).bind("unload",function(){g.destroy()})}}else c&&c.destroy()}},destroy:function(){var a=b.attr(this.input,"autocomplete");b(this.input).unbind(".datalistWidget").removeData("datalistWidget");this.shadowList.remove();b(k).unbind(".datalist"+this.id);this.input.form&&this.input.id&&b(this.input.form).unbind("submit.datalistWidget"+this.input.id);this.input.removeAttribute("aria-haspopup");a===n?this.input.removeAttribute("autocomplete"):b(this.input).attr("autocomplete",
a)},_resetListCached:function(){var a=this;this.needsUpdate=!0;this.lastUpdatedValue=!1;this.lastUnfoundValue="";if(!this.updateTimer)this.updateTimer=setTimeout(function(){a.updateListOptions()},this.isListVisible||o.QUnit?0:40*this.lazyIDindex)},updateListOptions:function(){this.needsUpdate=!1;clearTimeout(this.updateTimer);this.updateTimer=!1;this.shadowList.css({fontSize:b.curCSS(this.input,"fontSize"),fontFamily:b.curCSS(this.input,"fontFamily")});var a='<ul role="list" class="'+(this.datalist.className||
"")+" "+this.datalist.id+'-shadowdom">',d=[],c=[];b("option",this.datalist).each(function(a){if(!this.disabled){var e={value:b(this).val()||"",text:b.trim(b.attr(this,"label")||this.textContent||this.innerText||b.text([this])||""),className:this.className||"",style:b.attr(this,"style")||""};if(!e.text)e.text=e.value;d[a]=e.value;c[a]=e}});this.storedOptions=l(this.input.name||this.input.id);this.storedOptions.forEach(function(a){b.inArray(a,d)==-1&&c.push({value:a,text:a,className:"",style:""})});
c.forEach(function(b){var c=b.value.indexOf('"')!=-1?"'"+b.value+"'":'"'+b.value+'"';a+="<li data-value="+c+' class="'+b.className+'" style="'+b.style+'" tabindex="-1" role="listitem">'+b.text+"</li>"});a+="</ul>";this.arrayOptions=c;this.shadowList.html(a);b.fn.bgIframe&&m&&this.shadowList.bgIframe();this.isListVisible&&this.showHideOptions()},showHideOptions:function(){var a=b.prop(this.input,"value").toLowerCase();if(!(a===this.lastUpdatedValue||this.lastUnfoundValue&&a.indexOf(this.lastUnfoundValue)===
0)){this.lastUpdatedValue=a;var d=!1,c=b("li",this.shadowList);a?this.arrayOptions.forEach(function(g,e){if(!("lowerText"in g))g.lowerText=g.text.toLowerCase(),g.lowerValue=g.value.toLowerCase();g.lowerText.indexOf(a)!==-1||g.lowerValue.indexOf(a)!==-1?(b(c[e]).removeClass("hidden-item"),d=!0):b(c[e]).addClass("hidden-item")}):(c.removeClass("hidden-item"),d=!0);(this.hasViewableData=d)?this.showList():(this.lastUnfoundValue=a,this.hideList())}},showList:function(){if(this.isListVisible)return!1;
this.needsUpdate&&this.updateListOptions();this.showHideOptions();if(!this.hasViewableData)return!1;var a=this,d=b(this.input).offset();d.top+=b(this.input).outerHeight();d.width=b(this.input).outerWidth()-(parseInt(this.shadowList.css("borderLeftWidth"),10)||0)-(parseInt(this.shadowList.css("borderRightWidth"),10)||0);m&&(this.shadowList.css("height","auto"),this.shadowList.height()>250&&this.shadowList.css("height",220));this.shadowList.css(d).addClass("datalist-visible");this.isListVisible=!0;
b(k).bind("mousedown.datalist"+this.id+" focusin.datalist"+this.id,function(c){c.target===a.input||a.shadowList[0]===c.target||b.contains(a.shadowList[0],c.target)?(clearTimeout(a.hideTimer),setTimeout(function(){clearTimeout(a.hideTimer)},0)):a.timedHide()});return!0},hideList:function(){if(!this.isListVisible)return!1;this.shadowList.removeClass("datalist-visible list-item-active").scrollTop(0).find("li.active-item").removeClass("active-item");this.index=-1;this.isListVisible=!1;b(this.input).removeAttr("aria-activedescendant");
b(k).unbind(".datalist"+this.id);return!0},scrollIntoView:function(a){var d=b("> ul",this.shadowList),c=a.position();c.top-=(parseInt(d.css("paddingTop"),10)||0)+(parseInt(d.css("marginTop"),10)||0)+(parseInt(d.css("borderTopWidth"),10)||0);c.top<0?this.shadowList.scrollTop(this.shadowList.scrollTop()+c.top-2):(c.top+=a.outerHeight(),a=this.shadowList.height(),c.top>a&&this.shadowList.scrollTop(this.shadowList.scrollTop()+(c.top-a)+2))},markItem:function(a,d,c){c=c||b("li:not(.hidden-item)",this.shadowList);
if(c.length)a<0?a=c.length-1:a>=c.length&&(a=0),c.removeClass("active-item"),this.shadowList.addClass("list-item-active"),c=c.filter(":eq("+a+")").addClass("active-item"),d&&(b.prop(this.input,"value",c.attr("data-value")),b.attr(this.input,"aria-activedescendant",b.webshims.getID(c)),b(this.input).triggerHandler("updateInput"),this.scrollIntoView(c)),this.index=a}};(function(){f.defineNodeNameProperties("input",{list:{attr:{get:function(){var a=f.contentAttr(this,"list");return a==null?n:a},set:function(a){f.contentAttr(this,
"list",a);f.objectCreate(j,n,{input:this,id:a,datalist:b.prop(this,"list")})}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"},selectedOption:{prop:{writeable:!1,get:function(){var a=b.prop(this,"list"),d=null,c;if(!a)return d;c=b.attr(this,"value");if(!c)return d;a=b.prop(a,"options");if(!a.length)return d;b.each(a,function(a,e){if(c==b.prop(e,"value"))return d=e,!1});return d}}},autocomplete:{attr:{get:function(){var a=b.data(this,"datalistWidget");return a?a._autocomplete:"autocomplete"in
this?this.autocomplete:this.getAttribute("autocomplete")},set:function(a){var d=b.data(this,"datalistWidget");d?(d._autocomplete=a,a=="off"&&d.hideList()):"autocomplete"in this?this.autocomplete=a:this.setAttribute("autocomplete",a)}}}});f.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,get:function(){var a=b("select",this);return a[0]?a[0].options:[]}}});f.addReady(function(a,d){d.filter("select, option").each(function(){var a=this.parentNode,d=b.nodeName(a,"datalist");if(a&&!d)a=
a.parentNode,d=b.nodeName(a,"datalist");a&&d&&b(a).triggerHandler("updateDatalist")})})})()}})();(function(){var h={updateInput:1,input:1},e={radio:1,checkbox:1,submit:1,button:1,image:1,reset:1,file:1,color:1},m=function(b){var e,j=b.prop("value"),a=function(a){if(b){var c=b.prop("value");c!==j&&(j=c,(!a||!h[a.type])&&f.triggerInlineForm&&f.triggerInlineForm(b[0],"input"))}},d,c=function(){clearTimeout(d);d=setTimeout(a,9)},g=function(){b.unbind("focusout",g).unbind("keyup keypress keydown paste cut",
c).unbind("input change updateInput",a);clearInterval(e);setTimeout(function(){a();b=null},1)};clearInterval(e);e=setInterval(a,99);c();b.bind("keyup keypress keydown paste cut",c).bind("focusout",g).bind("input updateInput change",a)};b(k).bind("focusin",function(f){f.target&&f.target.type&&!f.target.readOnly&&!f.target.disabled&&(f.target.nodeName||"").toLowerCase()=="input"&&!e[f.target.type]&&m(b(f.target))})})();f.modules["form-output-datalist"]&&f.isReady("form-output-datalist",!0)});
