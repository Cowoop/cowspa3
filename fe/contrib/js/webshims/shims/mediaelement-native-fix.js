jQuery.webshims.ready("dom-support",function(f,c){if(!Modernizr.videoBuffered){var e=function(a){var b=c.data(a,"mediaelementBuffered");b||(b={buffered:{start:function(a){if(a>=b.buffered.length)c.error("buffered index size error");else return 0},end:function(a){if(a>=b.buffered.length)c.error("buffered index size error");else return b.loaded},length:0},loaded:0},c.data(a,"mediaelementBuffered",b));return b},g=function(a){if((a=a.originalEvent)&&"lengthComputable"in a){var b=c.data(a.target,"mediaelement");
if(!(b&&b.isActive!="html5")&&a.lengthComputable&&"loaded"in a){var b=a.target.duration,d=e(a.target);d.loaded=b?a.loaded/a.total*b:0;if(d.loaded)d.buffered.length=1;a.type=="load"&&f(a.target).triggerHandler("progress")}}},h=function(a){data=e(a.target);data.buffered.length=0;data.loaded=0};["audio","video"].forEach(function(a){var b=c.defineNodeNameProperty(a,"buffered",{prop:{get:function(){var a=c.data(this,"mediaelement");if(a&&a.isActive=="flash"&&b.prop._supget)b.prop._supget.apply(this);else return e(this).buffered}}})});
c.addReady(function(a,b){f("video, audio",a).add(b.filter("video, audio")).bind("load progress",g).bind("emptied",h)})}});
